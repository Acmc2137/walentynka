<!DOCTYPE html>
<html lang="pl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Walentynka üíï</title>
<style>
body {
    margin: 0;
    height: 100vh;
    background-color: #f6c1d1;
    display: flex;
    justify-content: center;
    align-items: center;
    font-family: Arial, sans-serif;
    overflow: hidden;
}
.container {
    width: 90%;
    max-width: 450px;
    background: rgba(255,255,255,0.95);
    padding: 30px 20px;
    border-radius: 30px;
    text-align: center;
    position: relative;
    z-index: 2;
}
h1 { font-size: 24px; color: #c2185b; margin-bottom: 30px; }
.big-love { display: none; font-size: 42px; color: #e91e63; font-weight: bold; margin-bottom: 20px; }
.love-photo { display: none; position: relative; justify-content: center; align-items: center; margin-bottom: 20px; }
.love-photo img { border-radius: 25px; box-shadow: 0 10px 25px rgba(0,0,0,0.25); }
#mainPhoto { height: 250px; }
.buttons { position: relative; height: 190px; }
button { font-size: 22px; padding: 15px 25px; border: none; border-radius: 40px; margin: 10px auto; display: block; transition: all 0.15s ease; width: auto; min-width: 100px; }
#yes { background-color: #ff5c8a; color: white; }
#no { background-color: #ddd; color: black; position: absolute; left: 50%; top: 110px; transform: translateX(-50%);}
.shake { animation: shake 0.25s; }
@keyframes shake {0%{transform:translate(-50%,0);}25%{transform:translate(-48%,0);}50%{transform:translate(-52%,0);}75%{transform:translate(-48%,0);}100%{transform:translate(-50%,0);}}
@keyframes pulse {0%{transform:scale(1);}50%{transform:scale(1.2);}100%{transform:scale(1);}}
.pulse { animation: pulse 0.6s ease infinite; }
.heart { position: fixed; top: -30px; font-size: 24px; animation: fall linear infinite; opacity: 0.85; pointer-events: none; z-index: 1; }
@keyframes fall { to { transform: translateY(110vh); } }
.flying { position: fixed; width: 80px; height: auto; pointer-events: none; z-index: 5; transform-origin: center center; }
</style>
</head>
<body>
<div class="container">
    <h1 id="question">Zuzia, zostaniesz mojƒÖ walentynkƒÖ? üíò</h1>
    <div class="big-love" id="bigLove">KOCHAM CIƒò MINIO ‚ù§Ô∏è</div>
    <div class="love-photo" id="lovePhotoContainer">
        <img id="mainPhoto" src="nasze-zdjecie.jpg" alt="Nasze zdjƒôcie">
    </div>
    <div class="buttons" id="buttonsBox">
        <button id="yes">TAK</button>
        <button id="no">nie</button>
    </div>
</div>

<audio id="loveSound" src="love-sound.mp3"></audio>

<script>
// Przyciski i animacje
const noButton=document.getElementById("no");
const yesButton=document.getElementById("yes");
const buttonsBox=document.getElementById("buttonsBox");
const bigLove=document.getElementById("bigLove");
const lovePhotoContainer=document.getElementById("lovePhotoContainer");
const mainPhoto=document.getElementById("mainPhoto");
const container=document.querySelector(".container");
const texts=["nie","no minio","A zr√≥b minkƒô :(","chyba ≈ºart..."];
let step=0, scale=1;

function moveNo(){
    const box=buttonsBox.getBoundingClientRect();
    noButton.style.left=Math.random()*(box.width-noButton.offsetWidth)+"px";
    noButton.style.top=Math.random()*(box.height-noButton.offsetHeight)+"px";
    if(step<texts.length-1) step++;
    noButton.textContent=texts[step];
    scale-=0.12; if(scale<0.6) scale=0.6;
    noButton.style.transform=`scale(${scale})`;
    const red=Math.min(255,180+step*25);
    noButton.style.backgroundColor=`rgb(${red},170,170)`;
    noButton.classList.add("shake");
    setTimeout(()=>noButton.classList.remove("shake"),250);
    if(navigator.vibrate) navigator.vibrate(100);
}
noButton.addEventListener("mouseenter",moveNo);
buttonsBox.addEventListener("touchstart",e=>{if(e.target.id==="no"){moveNo(); e.preventDefault();}});

// Klikniƒôcie TAK
yesButton.addEventListener("click",()=>{
    if(navigator.vibrate) navigator.vibrate([200,100,200,100,400]);
    document.getElementById("question").style.display="none";
    document.getElementById("buttonsBox").style.display="none";
    bigLove.style.display="block"; bigLove.classList.add("pulse");
    lovePhotoContainer.style.display="flex"; mainPhoto.style.display="block";

    const audio=document.getElementById("loveSound");
    if(audio) audio.play();
    for(let i=0;i<50;i++) createConfetti();

    startFlyingPNG();
});

// Serduszka i konfetti
function createHeart(){const heart=document.createElement("div");heart.className="heart";heart.innerText="‚ù§Ô∏è";const colors=["#ff5c8a","#e91e63","#ff4081","#f06292"];heart.style.color=colors[Math.floor(Math.random()*colors.length)];heart.style.left=Math.random()*100+"vw";heart.style.fontSize=(18+Math.random()*20)+"px";heart.style.animationDuration=(3+Math.random()*4)+"s";document.body.appendChild(heart);setTimeout(()=>heart.remove(),7000);}
setInterval(createHeart,350);
function createConfetti(){const confetti=document.createElement("div");confetti.style.position="fixed";confetti.style.width="8px";confetti.style.height="8px";confetti.style.backgroundColor=["#ff5c8a","#e91e63","#f06292","#ff4081"][Math.floor(Math.random()*4)];confetti.style.left=Math.random()*100+"vw";confetti.style.top="-10px";confetti.style.borderRadius="50%";confetti.style.zIndex=3;confetti.style.opacity=0.8;confetti.style.transition="all 3s linear";document.body.appendChild(confetti);setTimeout(()=>{confetti.style.top="110vh"; confetti.style.transform=`rotate(${Math.random()*360}deg)`;},10);setTimeout(()=>confetti.remove(),3100);}

// Boczne PNG typu DVD z poprawionym wczytywaniem i fallbackiem
function startFlyingPNG(){
    const screenW=window.innerWidth;
    const screenH=window.innerHeight;

    function createPNG(xStart, yStart, vx, vy){
        const img=document.createElement("img");
        img.className="flying";
        // üîπ NOWA ≈öCIE≈ªKA: ./ oznacza ten sam folder co HTML
        img.src="./meme1.png";
        // üîπ Fallback: je≈õli PNG nie wczyta siƒô, poka≈º serduszko
        img.onerror = ()=>{ img.src="https://via.placeholder.com/80x80.png?text=‚ù§Ô∏è"; };
        document.body.appendChild(img);
        return {el:img, x:xStart, y:yStart, vx:vx, vy:vy, angle:Math.random()*360, vang:(Math.random()*4-2), scale:1, scaleDir:1};
    }

    const pngs=[
        createPNG(0, Math.random()*(screenH-80), 3, 2),
        createPNG(screenW-80, Math.random()*(screenH-80), -3, 2)
    ];

    function animate(){
        pngs.forEach(p=>{
            p.x+=p.vx; p.y+=p.vy;
            p.angle+=p.vang;
            p.scale+=0.01*p.scaleDir;
            if(p.scale>1.2||p.scale<0.8) p.scaleDir*=-1;

            // odbicie od krawƒôdzi ekranu z lekkim przyspieszeniem
            if(p.x<=0||p.x>=screenW-80){ p.vx*=-1; p.vx+=Math.sign(p.vx)*0.2; }
            if(p.y<=0||p.y>=screenH-80){ p.vy*=-1; p.vy+=Math.sign(p.vy)*0.2; }

            // odbicie od kontenera
            const c=container.getBoundingClientRect();
            if(p.x+80>c.left && p.x<c.right && p.y+80>c.top && p.y<c.bottom){
                p.vx*=-1; p.vy*=-1;
                p.vx+=Math.random()*0.5-0.25;
                p.vy+=Math.random()*0.5-0.25;
            }

            p.el.style.left=p.x+"px";
            p.el.style.top=p.y+"px";
            p.el.style.transform=`rotate(${p.angle}deg) scale(${p.scale})`;
        });
        requestAnimationFrame(animate);
    }
    animate();
}
</script>
</body>
</html>
