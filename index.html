<!DOCTYPE html>
<html lang="pl">
<head>
<meta charset="UTF-8">
<title>Walentynka ‚ù§Ô∏è</title>

<style>
body{
    margin:0;
    height:100vh;
    display:flex;
    justify-content:center;
    align-items:center;
    background:#f6c1d1;
    font-family:Arial, sans-serif;
    overflow:hidden;
}

.container{
    width:750px;
    height:520px;
    background:white;
    border-radius:30px;
    padding:30px;
    box-sizing:border-box;
    text-align:center;
    position:relative;
    z-index:3;
    box-shadow:0 20px 40px rgba(0,0,0,0.25);
}

h1{color:#c2185b;margin-bottom:30px;}

.buttons{
    width:360px;
    height:220px;
    margin:0 auto;
    position:relative;
}

button{
    position:absolute;
    padding:12px 26px;
    font-size:20px;
    border:none;
    border-radius:30px;
    cursor:pointer;
    white-space:nowrap;
    z-index:4;
    transition:left 0.25s ease, top 0.25s ease;
}

#yes{
    background:#ff5c8a;
    color:white;
    left:50%;
    top:40px;
    transform:translateX(-50%);
}

#no{
    background:#ddd;
    left:50%;
    top:120px;
    transform:translateX(-50%);
}

.love-box{
    display:none;
    margin-top:10px;
    position:relative;
    z-index:4;
}

.love-box h2{color:#e91e63;margin-bottom:15px;}
.love-box img{max-width:240px;border-radius:20px;}

/* PNG */
.flying{
    position:fixed;
    width:180px;
    pointer-events:none;
    z-index:1;
}

/* SERDUSZKA */
.heart{
    position:fixed;
    top:-30px;
    font-size:24px;
    animation:fall linear infinite;
    opacity:0.85;
    pointer-events:none;
    z-index:0;
}
@keyframes fall{to{transform:translateY(110vh);}}
</style>
</head>

<body>

<div class="container" id="container">
    <h1 id="question">Zuzia, zostaniesz mojƒÖ walentynkƒÖ? üíò</h1>

    <div class="buttons" id="buttonsBox">
        <button id="yes">TAK</button>
        <button id="no">nie</button>
    </div>

    <div class="love-box" id="loveBox">
        <h2>Kocham Ciƒô minio ‚ù§Ô∏è</h2>
        <img src="nasze-zdjecie.jpg" alt="Nasze zdjƒôcie">
    </div>
</div>

<script>
/* SERDUSZKA */
function createHeart(){
    const h=document.createElement("div");
    h.className="heart";
    h.textContent="‚ù§Ô∏è";
    h.style.left=Math.random()*100+"vw";
    h.style.fontSize=(18+Math.random()*20)+"px";
    h.style.animationDuration=(4+Math.random()*4)+"s";
    document.body.appendChild(h);
    setTimeout(()=>h.remove(),8000);
}
setInterval(createHeart,350);

/* PRZYCISK NIE */
const noBtn=document.getElementById("no");
const box=document.getElementById("buttonsBox");
const texts=["nie","serio?","ej üò≥","no we≈∫","üíî"];
let textIndex=0, lastChange=0;

noBtn.addEventListener("mousemove",(e)=>{
    const now=Date.now();
    const boxRect=box.getBoundingClientRect();
    const btnRect=noBtn.getBoundingClientRect();

    const dx=(btnRect.left+btnRect.width/2)-e.clientX;
    const dy=(btnRect.top+btnRect.height/2)-e.clientY;
    const dist=Math.hypot(dx,dy);

    if(dist<120){
        const angle=Math.atan2(dy,dx);
        const move=35;

        let left=(btnRect.left-boxRect.left)+Math.cos(angle)*move;
        let top =(btnRect.top -boxRect.top )+Math.sin(angle)*move;

        left=Math.max(0,Math.min(box.clientWidth-btnRect.width,left));
        top =Math.max(0,Math.min(box.clientHeight-btnRect.height,top));

        noBtn.style.left=left+"px";
        noBtn.style.top =top +"px";

        if(now-lastChange>600 && textIndex<texts.length-1){
            textIndex++;
            noBtn.textContent=texts[textIndex];
            lastChange=now;
        }
    }
});

/* TAK */
const yesBtn=document.getElementById("yes");
const loveBox=document.getElementById("loveBox");
const question=document.getElementById("question");
const container=document.getElementById("container");

yesBtn.addEventListener("click",()=>{
    document.getElementById("buttonsBox").style.display="none";
    question.style.display="none";
    loveBox.style.display="block";
    startFlyingPNG();
});

/* PNG ‚Äì LATAJƒÑ PO EKRANIE I ODBIJAJƒÑ SIƒò OD BOXA + NIE WCHODZƒÑ W ROGI */
function startFlyingPNG(){
    const pngs=[];
    const count=8;
    const size=180;

    // üî• Strefa zakazana przy krawƒôdziach ekranu (eliminuje rogi)
    const EDGE_PAD = 50; // zwiƒôksz np. do 70 je≈õli chcesz bardziej odsunƒÖƒá od rog√≥w

    // wymiary "dozwolonego pola" dla PNG (≈ºeby nie wchodzi≈Çy w rogi)
    const minX = EDGE_PAD;
    const minY = EDGE_PAD;
    const maxX = () => window.innerWidth  - size - EDGE_PAD;
    const maxY = () => window.innerHeight - size - EDGE_PAD;

    function randSpeed(){
        const s = Math.random()*2.5 + 2.5; // 2.5..5.0
        return s * (Math.random()<0.5 ? -1 : 1);
    }

    // start poza bia≈Çym boxem (przeszkodƒÖ)
    for(let i=0;i<count;i++){
        const img=document.createElement("img");
        img.src="meme1.png";
        img.className="flying";
        document.body.appendChild(img);

        let x, y;
        do{
            x = minX + Math.random() * Math.max(1, (maxX()-minX));
            y = minY + Math.random() * Math.max(1, (maxY()-minY));
        } while (intersectsBox(x,y,size, container.getBoundingClientRect()));

        pngs.push({ el:img, x, y, vx: randSpeed(), vy: randSpeed() });
    }

    function intersectsBox(x,y,s, rect){
        return (x+s>rect.left && x<rect.right && y+s>rect.top && y<rect.bottom);
    }

    function ensureMinSpeed(p){
        const min = 1.8;
        if(Math.abs(p.vx) < min) p.vx = min * Math.sign(p.vx || 1);
        if(Math.abs(p.vy) < min) p.vy = min * Math.sign(p.vy || 1);
    }

    function kick(p){
        // ma≈Çy losowy impuls ≈ºeby nie ‚Äúwpa≈õƒá w pƒôtlƒô‚Äù
        p.vx += (Math.random()*0.8 - 0.4);
        p.vy += (Math.random()*0.8 - 0.4);
        ensureMinSpeed(p);
    }

    function animate(){
        const boxRect = container.getBoundingClientRect();
        const xMax = maxX();
        const yMax = maxY();

        pngs.forEach(p=>{
            p.x += p.vx;
            p.y += p.vy;

            // odbicie od "bezpiecznych" krawƒôdzi (z paddingiem)
            if(p.x <= minX){
                p.x = minX;
                p.vx = Math.abs(p.vx);
                kick(p);
            } else if(p.x >= xMax){
                p.x = xMax;
                p.vx = -Math.abs(p.vx);
                kick(p);
            }

            if(p.y <= minY){
                p.y = minY;
                p.vy = Math.abs(p.vy);
                kick(p);
            } else if(p.y >= yMax){
                p.y = yMax;
                p.vy = -Math.abs(p.vy);
                kick(p);
            }

            // kolizja z bia≈Çym boxem (przeszkodƒÖ)
            if(intersectsBox(p.x, p.y, size, boxRect)){
                // cofamy krok i odbijamy w osi, kt√≥ra bardziej "wesz≈Ça" w przeszkodƒô
                p.x -= p.vx;
                p.y -= p.vy;

                const cx = p.x + size/2;
                const cy = p.y + size/2;
                const boxCx = (boxRect.left + boxRect.right)/2;
                const boxCy = (boxRect.top + boxRect.bottom)/2;

                // odbij ‚Äúbardziej‚Äù w stronƒô oddalajƒÖcƒÖ od ≈õrodka boxa
                if(Math.abs(cx - boxCx) > Math.abs(cy - boxCy)){
                    p.vx *= -1;
                } else {
                    p.vy *= -1;
                }
                kick(p);

                // wypchnij delikatnie poza box (≈ºeby nie utkwi≈Ç na krawƒôdzi)
                while(intersectsBox(p.x,p.y,size,boxRect)){
                    p.x += Math.sign(p.vx) * 2;
                    p.y += Math.sign(p.vy) * 2;
                }
            }

            // dodatkowy ‚Äúanti-corner‚Äù kick, gdy obiekt jest blisko naro≈ºnik√≥w pola dozwolonego
            const nearLeft = (p.x - minX) < 6;
            const nearRight = (xMax - p.x) < 6;
            const nearTop = (p.y - minY) < 6;
            const nearBottom = (yMax - p.y) < 6;
            if((nearLeft || nearRight) && (nearTop || nearBottom)){
                kick(p);
            }

            p.el.style.left = p.x + "px";
            p.el.style.top  = p.y + "px";
        });

        requestAnimationFrame(animate);
    }

    animate();
}
</script>

</body>
</html>
